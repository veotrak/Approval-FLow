<?xml version="1.0" encoding="UTF-8"?>
<customrecordtype scriptid="customrecord_p2p_decision_rule">
  <name>P2P Decision Rule</name>
  <recordname>P2P Decision Rule</recordname>
  <description>Decision table entry - maps conditions to an approval path</description>
  <customrecordcustomfields>
    <!-- Identification -->
    <customrecordcustomfield scriptid="custrecord_dr_code">
      <label>Rule Code</label>
      <fieldtype>TEXT</fieldtype>
      <isrequired>T</isrequired>
      <help>Short unique code for reference (e.g., US_HIGH_VALUE_PO)</help>
    </customrecordcustomfield>
    
    <!-- Transaction Type -->
    <customrecordcustomfield scriptid="custrecord_dr_tran_type">
      <label>Transaction Type</label>
      <fieldtype>MULTISELECT</fieldtype>
      <selectrecordtype>customlist_p2p_tran_type</selectrecordtype>
      <isrequired>T</isrequired>
      <help>PO, VB, or both</help>
    </customrecordcustomfield>
    
    <!-- Subsidiary (Multi-select, blank = all) -->
    <customrecordcustomfield scriptid="custrecord_dr_subsidiary">
      <label>Subsidiary</label>
      <fieldtype>MULTISELECT</fieldtype>
      <selectrecordtype>subsidiary</selectrecordtype>
      <help>Leave blank to match all subsidiaries</help>
    </customrecordcustomfield>
    
    <!-- Amount Range -->
    <customrecordcustomfield scriptid="custrecord_dr_amt_min">
      <label>Amount Minimum</label>
      <fieldtype>CURRENCY</fieldtype>
      <isrequired>T</isrequired>
      <help>Minimum amount (inclusive). Use 0 for no minimum.</help>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_dr_amt_max">
      <label>Amount Maximum</label>
      <fieldtype>CURRENCY</fieldtype>
      <help>Maximum amount (inclusive). Leave blank for no maximum.</help>
    </customrecordcustomfield>
    
    <!-- Department (Multi-select, blank = all) -->
    <customrecordcustomfield scriptid="custrecord_dr_department">
      <label>Department</label>
      <fieldtype>MULTISELECT</fieldtype>
      <selectrecordtype>department</selectrecordtype>
      <help>Leave blank to match all departments</help>
    </customrecordcustomfield>
    
    <!-- Location (Multi-select, blank = all) -->
    <customrecordcustomfield scriptid="custrecord_dr_location">
      <label>Location</label>
      <fieldtype>MULTISELECT</fieldtype>
      <selectrecordtype>location</selectrecordtype>
      <help>Leave blank to match all locations</help>
    </customrecordcustomfield>
    
    <!-- Risk Score Range -->
    <customrecordcustomfield scriptid="custrecord_dr_risk_min">
      <label>Risk Score Minimum</label>
      <fieldtype>INTEGER</fieldtype>
      <help>Minimum AI risk score (0-100). Leave blank for no minimum.</help>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_dr_risk_max">
      <label>Risk Score Maximum</label>
      <fieldtype>INTEGER</fieldtype>
      <help>Maximum AI risk score (0-100). Leave blank for no maximum.</help>
    </customrecordcustomfield>
    
    <!-- Exception Types (Multi-select for VB matching exceptions) -->
    <customrecordcustomfield scriptid="custrecord_dr_exception">
      <label>Exception Types</label>
      <fieldtype>MULTISELECT</fieldtype>
      <selectrecordtype>customlist_p2p_exception_type</selectrecordtype>
      <help>Match only if these exceptions are present. Leave blank to ignore exceptions.</help>
    </customrecordcustomfield>
    
    <!-- Priority (lower number = higher priority, evaluated first) -->
    <customrecordcustomfield scriptid="custrecord_dr_priority">
      <label>Priority</label>
      <fieldtype>INTEGER</fieldtype>
      <isrequired>T</isrequired>
      <help>Lower number = higher priority. First matching rule wins.</help>
    </customrecordcustomfield>
    
    <!-- OUTPUT: The Approval Path -->
    <customrecordcustomfield scriptid="custrecord_dr_path">
      <label>Approval Path</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customrecord_p2p_approval_path</selectrecordtype>
      <isrequired>T</isrequired>
      <help>The approval path to use when this rule matches</help>
    </customrecordcustomfield>
    
    <!-- Effective Dates -->
    <customrecordcustomfield scriptid="custrecord_dr_eff_from">
      <label>Effective From</label>
      <fieldtype>DATE</fieldtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_dr_eff_to">
      <label>Effective To</label>
      <fieldtype>DATE</fieldtype>
      <help>Leave blank for no end date</help>
    </customrecordcustomfield>
    
    <!-- Active Flag -->
    <customrecordcustomfield scriptid="custrecord_dr_active">
      <label>Active</label>
      <fieldtype>CHECKBOX</fieldtype>
      <defaultvalue>T</defaultvalue>
    </customrecordcustomfield>
    
    <!-- Description for admins -->
    <customrecordcustomfield scriptid="custrecord_dr_description">
      <label>Description</label>
      <fieldtype>TEXTAREA</fieldtype>
      <help>Optional description explaining when this rule applies</help>
    </customrecordcustomfield>
  </customrecordcustomfields>
</customrecordtype>
