<?xml version="1.0" encoding="UTF-8"?>
<customrecordtype scriptid="customrecord_p2p_approval_task">
  <n>P2P Approval Task</n>
  <recordname>P2P Approval Task</recordname>
  <description>Individual approval task assigned to an approver</description>
  <customrecordcustomfields>
    <!-- Transaction Reference -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_tran_type">
      <label>Transaction Type</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customlist_p2p_tran_type</selectrecordtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_tran_id">
      <label>Transaction ID</label>
      <fieldtype>INTEGER</fieldtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <!-- NEW: Path Reference (replaces Rule reference) -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_path">
      <label>Approval Path</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customrecord_p2p_approval_path</selectrecordtype>
    </customrecordcustomfield>
    
    <!-- NEW: Path Step Reference (replaces Step reference) -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_path_step">
      <label>Path Step</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customrecord_p2p_path_step</selectrecordtype>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_sequence">
      <label>Sequence</label>
      <fieldtype>INTEGER</fieldtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <!-- Approver -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_approver">
      <label>Approver</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>employee</selectrecordtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_acting_approver">
      <label>Acting Approver</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>employee</selectrecordtype>
      <help>Set when delegated</help>
    </customrecordcustomfield>
    
    <!-- Status -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_status">
      <label>Status</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customlist_p2p_task_status</selectrecordtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <!-- Timestamps -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_created">
      <label>Created</label>
      <fieldtype>DATETIME</fieldtype>
      <isrequired>T</isrequired>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_completed">
      <label>Completed</label>
      <fieldtype>DATETIME</fieldtype>
    </customrecordcustomfield>
    
    <!-- Email Token -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_token">
      <label>Token</label>
      <fieldtype>TEXT</fieldtype>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_token_expiry">
      <label>Token Expiry</label>
      <fieldtype>DATETIME</fieldtype>
    </customrecordcustomfield>
    
    <!-- Tracking -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_reminder_count">
      <label>Reminder Count</label>
      <fieldtype>INTEGER</fieldtype>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_escalated">
      <label>Escalated</label>
      <fieldtype>CHECKBOX</fieldtype>
    </customrecordcustomfield>
    
    <!-- LEGACY: Keep for backward compatibility during migration -->
    <customrecordcustomfield scriptid="custrecord_p2p_at_rule">
      <label>Approval Rule (Legacy)</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customrecord_p2p_approval_rule</selectrecordtype>
      <help>Deprecated - use Approval Path instead</help>
    </customrecordcustomfield>
    
    <customrecordcustomfield scriptid="custrecord_p2p_at_step">
      <label>Approval Step (Legacy)</label>
      <fieldtype>SELECT</fieldtype>
      <selectrecordtype>customrecord_p2p_approval_step</selectrecordtype>
      <help>Deprecated - use Path Step instead</help>
    </customrecordcustomfield>
  </customrecordcustomfields>
</customrecordtype>
